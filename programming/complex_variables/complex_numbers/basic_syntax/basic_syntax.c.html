<div class="highlight"><pre><span></span><span class="cm">/******************************************************************************</span>
<span class="cm"> *                                  LICENSE                                   *</span>
<span class="cm"> ******************************************************************************</span>
<span class="cm"> *  This file is part of mitx_mathematics_programming_examples.               *</span>
<span class="cm"> *                                                                            *</span>
<span class="cm"> *  mitx_mathematics_programming_examples is free software: you can           *</span>
<span class="cm"> *  redistribute it and/or modify it under the terms of the GNU General       *</span>
<span class="cm"> *  Public License as published by the Free Software Foundation, either       *</span>
<span class="cm"> *  version 3 of the License, or (at your option) any later version.          *</span>
<span class="cm"> *                                                                            *</span>
<span class="cm"> *  mitx_mathematics_programming_examples is distributed in the hope that     *</span>
<span class="cm"> *  it will be useful but WITHOUT ANY WARRANTY; without even the implied      *</span>
<span class="cm"> *  warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.          *</span>
<span class="cm"> *  See the GNU General Public License for more details.                      *</span>
<span class="cm"> *                                                                            *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License         *</span>
<span class="cm"> *  along with mitx_mathematics_programming_examples. If not, see             *</span>
<span class="cm"> *  &lt;https://www.gnu.org/licenses/&gt;.                                          *</span>
<span class="cm"> ******************************************************************************</span>
<span class="cm"> *  Purpose:                                                                  *</span>
<span class="cm"> *      Provides basic syntax for complex numbers using the C89 standard.     *</span>
<span class="cm"> ******************************************************************************</span>
<span class="cm"> *  Author: Ryan Maguire                                                      *</span>
<span class="cm"> *  Date:   2024/11/04                                                        *</span>
<span class="cm"> ******************************************************************************/</span>

<span class="cm">/*  As before, stdio.h provides the &quot;printf&quot; function.                        */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="cm">/*  The standard library provides sqrt and atan2. sqrt computes the square    *</span>
<span class="cm"> *  root of a non-negative real number, and atan2 computes the angle the      *</span>
<span class="cm"> *  point (x, y) in the plane makes with the x axis.                          */</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;math.h&gt;</span>

<span class="cm">/*  Mimicing other programming libraries, let&#39;s define a complex number as an *</span>
<span class="cm"> *  ordered pair of real numbers.                                             */</span>
<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">real</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">imag</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="k">complex</span><span class="p">;</span>

<span class="cm">/*  UNIMPORTANT NOTE.                                                         *</span>
<span class="cm"> *      Every function to follow (except main) will have the word &quot;static&quot;    *</span>
<span class="cm"> *      before it. This simply means the function is only used in this file.  *</span>
<span class="cm"> *      Since this is a small demo, and not a programming library, every      *</span>
<span class="cm"> *      function is declared &quot;static.&quot; Doing this makes compilers happier.    *</span>
<span class="cm"> *      The student can simply ignore this keyword.                           */</span>

<span class="cm">/*  This function computes the real part of a complex number. It is           *</span>
<span class="cm"> *  equivalent to Re(z) in our notation.                                      */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">real_part</span><span class="p">(</span><span class="k">complex</span><span class="w"> </span><span class="n">z</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/*  To access the elements in our &quot;struct&quot;, we use dot notation.          *</span>
<span class="cm">     *  z is a struct with variables &quot;real&quot; and &quot;imag&quot; stored inside.         *</span>
<span class="cm">     *  To access the &quot;real&quot; variable, we write z.real.                       *</span>
<span class="cm">     *  Return this to compute the real part of z.                            */</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">z</span><span class="p">.</span><span class="n">real</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*  Similarly, this function computes Im(z).                                  */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">imag_part</span><span class="p">(</span><span class="k">complex</span><span class="w"> </span><span class="n">z</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/*  To access imag, write z.imag.                                         */</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">z</span><span class="p">.</span><span class="n">imag</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/*  This function computes the magnitude of z.                                */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">modulus</span><span class="p">(</span><span class="k">complex</span><span class="w"> </span><span class="n">z</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/*  Use the Pythagorean formula to compute |z|.                           */</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">real_squared</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">z</span><span class="p">.</span><span class="n">real</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">z</span><span class="p">.</span><span class="n">real</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">imag_squared</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">z</span><span class="p">.</span><span class="n">imag</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">z</span><span class="p">.</span><span class="n">imag</span><span class="p">;</span>

<span class="w">    </span><span class="cm">/*  Pythagoras: Square root of the sum of the squares.                    */</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">sqrt</span><span class="p">(</span><span class="n">real_squared</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">imag_squared</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*  Computes the principal argument of z.                                     */</span>
<span class="k">static</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="nf">principal_argument</span><span class="p">(</span><span class="k">complex</span><span class="w"> </span><span class="n">z</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/*  math.h provides atan2, which computes the angle the point (x, y)      *</span>
<span class="cm">     *  makes with the positive x axis. This is the unique number theta, with *</span>
<span class="cm">     *  -pi &lt; theta &lt;= pi, that contains (x, y) on the ray of angle theta. By *</span>
<span class="cm">     *  convention, atan2(0, 0) = 0.                                          *</span>
<span class="cm">     *                                                                        *</span>
<span class="cm">     *  NOTE:                                                                 *</span>
<span class="cm">     *      The syntax is theta = atan2(y, x). DO NOT WRITE atan2(x, y).      */</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">atan2</span><span class="p">(</span><span class="n">z</span><span class="p">.</span><span class="n">imag</span><span class="p">,</span><span class="w"> </span><span class="n">z</span><span class="p">.</span><span class="n">real</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*  Same routine as before, printing out some values using our new functions. */</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="cm">/*  Lacking a compiler that implements complex numbers directly, we       *</span>
<span class="cm">     *  create complex numbers using &quot;struct&quot; syntax. This looks as follows.  */</span>
<span class="w">    </span><span class="k">complex</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">};</span><span class="w"> </span><span class="cm">/* This is z = 1 + i. */</span>

<span class="w">    </span><span class="cm">/*  Get the real and imaginary parts of z.                                */</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">real_part</span><span class="p">(</span><span class="n">z</span><span class="p">);</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">imag_part</span><span class="p">(</span><span class="n">z</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/*  And get the polar form of z.                                          */</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">modulus</span><span class="p">(</span><span class="n">z</span><span class="p">);</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">theta</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">principal_argument</span><span class="p">(</span><span class="n">z</span><span class="p">);</span>

<span class="w">    </span><span class="cm">/*  Print everything to the screen, just as before.                       */</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;z = %f + %f i</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;|z| = |%f + %f i| = %f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">r</span><span class="p">);</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;Arg(z) = Arg(%f + %f i) = %f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">theta</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
