<div class="highlight"><pre><span></span><span class="cm">(******************************************************************************</span>
<span class="cm"> *                                  LICENSE                                   *</span>
<span class="cm"> ******************************************************************************</span>
<span class="cm"> *  This file is part of mitx_mathematics_programming_examples.               *</span>
<span class="cm"> *                                                                            *</span>
<span class="cm"> *  mitx_mathematics_programming_examples is free software: you can           *</span>
<span class="cm"> *  redistribute it and/or modify it under the terms of the GNU General Public*</span>
<span class="cm"> *  License as published by the Free Software Foundation, either version 3 of *</span>
<span class="cm"> *  the License, or (at your option) any later version.                       *</span>
<span class="cm"> *                                                                            *</span>
<span class="cm"> *  mitx_mathematics_programming_examples is distributed in the hope that it  *</span>
<span class="cm"> *  will be useful but WITHOUT ANY WARRANTY; without even the implied warranty*</span>
<span class="cm"> *  of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the          *</span>
<span class="cm"> *  GNU General Public License for more details.                              *</span>
<span class="cm"> *                                                                            *</span>
<span class="cm"> *  You should have received a copy of the GNU General Public License         *</span>
<span class="cm"> *  along with mitx_mathematics_programming_examples.  If not, see            *</span>
<span class="cm"> *  &lt;https://www.gnu.org/licenses/&gt;.                                          *</span>
<span class="cm"> ******************************************************************************</span>
<span class="cm"> *  Purpose:                                                                  *</span>
<span class="cm"> *      Calculates square roots using Heron&#39;s method.                         *</span>
<span class="cm"> ******************************************************************************</span>
<span class="cm"> *  Author: Ryan Maguire                                                      *</span>
<span class="cm"> *  Date:   2025/03/09                                                        *</span>
<span class="cm"> ******************************************************************************)</span>
<span class="k">PROGRAM</span><span class="w"> </span><span class="n">Heron</span><span class="o">;</span>

<span class="cm">(*  We define two constants: The allowed tolerance (or epsilon value),        *</span>
<span class="cm"> *  and the maximum number of iterations we allow for Heron&#39;s method.         *)</span>
<span class="k">CONST</span>

<span class="w">    </span><span class="cm">(*  Heron&#39;s method is iterative. The convergence is quadratic,            *</span>
<span class="cm">     *  meaning the number of accurate decimals doubles with each             *</span>
<span class="cm">     *  iteration. Because of this we can stop after a few steps.             *)</span>
<span class="w">    </span><span class="n">MaximumNumberOfIterations</span><span class="o">:</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="o">;</span>

<span class="w">    </span><span class="cm">(*  Maximum allowed error. This is double precision epsilon.              *)</span>
<span class="w">    </span><span class="n">Epsilon</span><span class="o">:</span><span class="w"> </span><span class="kt">Real</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2.220446049250313E-16</span><span class="o">;</span>

<span class="w">    </span><span class="cm">(*  The input value we will compute the square root of.                   *)</span>
<span class="w">    </span><span class="n">Value</span><span class="o">:</span><span class="w"> </span><span class="kt">Real</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">2.0</span><span class="o">;</span>

<span class="k">VAR</span>
<span class="w">    </span><span class="cm">(*  Variable for the square root of our input.                            *)</span>
<span class="w">    </span><span class="n">SqrtValue</span><span class="o">:</span><span class="w"> </span><span class="kt">Real</span><span class="o">;</span>

<span class="cm">(******************************************************************************</span>
<span class="cm"> *  Function:                                                                 *</span>
<span class="cm"> *      HeronsMethod                                                          *</span>
<span class="cm"> *  Purpose:                                                                  *</span>
<span class="cm"> *      Computes square roots using Heron&#39;s method.                           *</span>
<span class="cm"> *  Arguments:                                                                *</span>
<span class="cm"> *      X (Real):                                                             *</span>
<span class="cm"> *          A positive real number.                                           *</span>
<span class="cm"> *  OUTPUT:                                                                   *</span>
<span class="cm"> *      SqrtX (Real):                                                         *</span>
<span class="cm"> *          The square root of X.                                             *</span>
<span class="cm"> ******************************************************************************)</span>
<span class="k">Function</span><span class="w"> </span><span class="nf">HeronsMethod</span><span class="p">(</span><span class="k">Const</span><span class="w"> </span><span class="n">X</span><span class="o">:</span><span class="w"> </span><span class="kt">Real</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Real</span><span class="o">;</span>

<span class="k">VAR</span>
<span class="w">    </span><span class="n">Error</span><span class="o">:</span><span class="w"> </span><span class="kt">Real</span><span class="o">;</span>
<span class="w">    </span><span class="n">Iters</span><span class="o">:</span><span class="w"> </span><span class="kt">Integer</span><span class="o">;</span>

<span class="k">BEGIN</span>

<span class="w">    </span><span class="cm">(* Heron&#39;s method needs a starting value. Pick the input.                 *)</span>
<span class="w">    </span><span class="n">HeronsMethod</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">X</span><span class="o">;</span>

<span class="w">    </span><span class="cm">(*  Iteratively perform Heron&#39;s method.                                   *)</span>
<span class="w">    </span><span class="k">FOR</span><span class="w"> </span><span class="n">Iters</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">MaximumNumberOfIterations</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">DO</span>
<span class="w">    </span><span class="k">BEGIN</span>

<span class="w">        </span><span class="cm">(*  If the error is small we can break out of this loop.              *)</span>
<span class="w">        </span><span class="n">Error</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">(</span><span class="n">X</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">HeronsMethod</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">HeronsMethod</span><span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">X</span><span class="o">;</span>

<span class="w">        </span><span class="k">IF</span><span class="w"> </span><span class="p">(</span><span class="nb">ABS</span><span class="p">(</span><span class="n">Error</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">Epsilon</span><span class="p">)</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="k">BREAK</span><span class="o">;</span>

<span class="w">        </span><span class="cm">(*  Otherwise, improve our approximation using Heron&#39;s method.        *)</span>
<span class="w">        </span><span class="n">HeronsMethod</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">HeronsMethod</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">HeronsMethod</span><span class="p">)</span><span class="o">;</span>
<span class="w">    </span><span class="k">END</span><span class="o">;</span>
<span class="k">END</span><span class="o">;</span>

<span class="cm">(*  Program for testing our implementation of Heron&#39;s method.                 *)</span>
<span class="k">BEGIN</span>

<span class="w">    </span><span class="cm">(*  Compute the square root using Heron&#39;s method and print the result.    *)</span>
<span class="w">    </span><span class="n">SqrtValue</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">HeronsMethod</span><span class="p">(</span><span class="n">Value</span><span class="p">)</span><span class="o">;</span>
<span class="w">    </span><span class="nb">WriteLn</span><span class="p">(</span><span class="s">&#39;sqrt(&#39;</span><span class="o">,</span><span class="w"> </span><span class="n">Value</span><span class="o">:</span><span class="mi">0</span><span class="o">:</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s">&#39;) = &#39;</span><span class="o">,</span><span class="w"> </span><span class="n">SqrtValue</span><span class="o">:</span><span class="mi">0</span><span class="o">:</span><span class="mi">16</span><span class="p">)</span><span class="o">;</span>

<span class="k">END</span><span class="o">.</span>

<span class="cm">(*  We can compile this using the Free Pascal Compiler (fpc):                 *</span>
<span class="cm"> *      https://www.freepascal.org/                                           *</span>
<span class="cm"> *  Once installed, on GNU, Linux, FreeBSD, macOS, etc., this can be run by:  *</span>
<span class="cm"> *      fpc herons_method.pas -omain                                          *</span>
<span class="cm"> *      ./main                                                                *</span>
<span class="cm"> *  This outputs:                                                             *</span>
<span class="cm"> *      sqrt(2.0) = 1.4142135623730949                                        *</span>
<span class="cm"> *  The relative error is 1.570092458683775E-16.                              *</span>
<span class="cm"> *                                                                            *</span>
<span class="cm"> *  On Windows, type:                                                         *</span>
<span class="cm"> *      fpc herons_method.pas -omain.exe                                      *</span>
<span class="cm"> *      main.exe                                                              *</span>
<span class="cm"> *  This produces the same output.                                            *)</span>
</pre></div>
